<%- include('./partials/navbar.ejs') %>
<% let isFavorite %>



<!-- password1 -->
<div class="main-container">
  <main>
    <h2 style="color: white;"><%= comedian.name  %></h2>
    <% comedian.dataValues.jokes.sort(function(a, b){return b.likes-a.likes}).forEach(function(joke) { %>
    <div class="jokes-container">
      <div class="individual-joke">
        <p> "<%= joke.content  %>"  %> </p>
        <% isFavorite = false %> 
        <% for (i=0; i < currentUser.dataValues.jokes.length; i++) { %> 
          <% if (currentUser.dataValues.jokes[i].id === joke.id) { %> 
            <% isFavorite = true; %> 
            <% break; %> 
            <% }  %>    
            <% }  %> 
        <div class="items-container">
          <% if (isFavorite === false) { %>
          <div class="laughs-container">
            <form method="POST" action="/comedian/addjoke/<%= joke.id %> ">
              <input hidden type="text">
              <button type="submit">Add a laugh</button>
            </form>
          </div>
          <% } else { %>
          <div class="laughs-container">
            <form method="POST" action="/comedian/takejoke/<%= joke.id %> ">
              <input hidden type="text">
              <button type="submit">Remove a laugh</button>
            </form>
          </div>
          <% } %>
          <div class="number-container">
            <span class="laughs-number">Laughs: <%= joke.likes  %> </span>
          </div>
        </div>
      </div>
    </div>
    <%}) %>
  </main>
</div>
